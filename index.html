<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Apology Website — Puzzle Surprise</title>
<style>
/* ---------- General ---------- */
* { box-sizing: border-box; }
html,body { height:100%; margin:0; font-family: Arial, sans-serif; background:#ffe6ec; color:#222; }

/* ---------- LOGIN / INTRO ---------- */
#login-form {
  height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background: url('photo3.jpeg') center/cover no-repeat;
  text-align:center;
}
#login-form h1 { color:white; text-shadow:0 2px 8px rgba(0,0,0,0.6); margin-bottom:14px; font-size:34px; }
#login-form input[type="text"] { padding:10px 12px; width:240px; border-radius:8px; border:0; margin-bottom:10px; font-size:16px; }
#login-form input[type="submit"] { padding:10px 14px; border-radius:8px; border:0; background:#ff4d6d; color:white; cursor:pointer; font-size:16px; }

/* ---------- MAIN LAYOUT ---------- */
#main { display:none; min-height:100vh; position:relative; padding:28px; }

/* Logout bottom-left */
#logout { position:fixed; left:20px; bottom:20px; background:#ff4d6d; color:white; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; z-index:1200; }

/* Photos on the right */
#photos { position:fixed; right:40px; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; gap:18px; z-index:10; }
#photos img { width:250px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.12); }

/* Left tabs area (apology + puzzle card) */
.left-area { position: absolute; left:40px; top:50%; transform:translateY(-50%); width:420px; z-index:50; }

/* Tab buttons */
.tab-btn { display:block; width:220px; padding:12px 16px; margin-bottom:10px; border-radius:10px; border:0; background:#ff4d6d; color:white; font-size:16px; cursor:pointer; text-align:left; }

/* Message card (apology) */
.card {
  background:white;
  border-radius:12px;
  padding:18px;
  box-shadow:0 6px 20px rgba(0,0,0,0.12);
  max-width:420px;
  white-space:pre-line;
  line-height:1.6;
  font-size:16px;
}

/* Puzzle box matches style of card */
#puzzle-card { display:none; margin-top:12px; width:340px; padding:18px; }

/* Puzzle controls */
#puzzle-controls { display:flex; gap:8px; margin-bottom:12px; justify-content:center; }
#puzzle-controls button { padding:8px 12px; border-radius:8px; border:0; background:#ff4d6d; color:white; cursor:pointer; }

/* Puzzle container (300x300 working size) */
#puzzle-box {
  width:340px; background:white; border-radius:12px; padding:16px; box-shadow:0 6px 20px rgba(0,0,0,0.12);
  text-align:center;
}
#puzzle-container { width:300px; height:300px; margin:8px auto 0; position:relative; }

/* tiles are <img> with object-fit none and object-position set */
.tile {
  position:absolute;
  box-sizing:border-box;
  border:1px solid #fff;
  cursor:pointer;
  transition: top 0.25s, left 0.25s;
  display:block;
}

/* puzzle solved msg and back button */
#puzzle-message { display:none; margin-top:12px; background:#fff0f5; padding:10px; border-radius:10px; font-weight:600; }
#puzzle-back { margin-top:12px; padding:8px 12px; border-radius:8px; border:0; background:#ff4d6d; color:white; cursor:pointer; }

/* ---------- Floating hearts (unchanged) ---------- */
.heart {
  position:absolute;
  width:90px; height:90px;
  background:red;
  transform:rotate(-45deg);
  z-index:30;
  pointer-events:none;
}
.heart:before, .heart:after {
  content:""; position:absolute; width:90px; height:90px; background:red; border-radius:50%;
}
.heart:before { top:-45px; left:0; }
.heart:after { left:45px; top:0; }
.heart span { position:absolute; top:55%; left:50%; transform:translate(-50%,-50%) rotate(45deg); color:white; font-weight:bold; text-shadow:0 0 6px black; width:80px; text-align:center; pointer-events:none; }

/* small responsive tweak so left area doesn't overflow on tiny screens */
@media (max-width:480px) {
  .left-area { left:12px; width:320px; transform:none; top:20px; }
  #photos { right:12px; display:none; } /* hide photos on tiny screens to avoid crowding */
  #puzzle-box, .card { width:320px; }
}
</style>
</head>
<body>

<!-- LOGIN / INTRO -->
<div id="login-form">
  <h1>Login</h1>
  <input id="name" type="text" placeholder="Enter your name" />
  <input id="login-btn" type="submit" value="Login" />
</div>

<!-- MAIN (hidden until login) -->
<div id="main">

  <!-- logout -->
  <button id="logout">Logout</button>

  <!-- left area: tabs + cards -->
  <div class="left-area">
    <button class="tab-btn" id="show-message">Apology Message</button>
    <button class="tab-btn" id="show-puzzle-tab">Puzzle Surprise</button>

    <!-- apology card (kept EXACT as you wanted) -->
    <div id="message-card" class="card" style="display:none; margin-top:12px;">
I’m really sorry for what I’ve done I hurt you and there’s no excuse for it you’ve always shown me love loyalty and patience and I broke the trust again in which we just reestablished and rebuilt and that you gave me I want you to know that my actions are a reflection of my flaws I should’ve handled the situation differently I handled everything terribly you are an incredible strong caring intelligent I should have been as amazing as you have been to me and I’m sorry for failing you I just want you to know that I truly value you and I’m committed to understanding you better you deserve the world I’m sorry for hurting you you mean a lot to me and I hope that I can show you that I only handled the situation wrong not that I don’t love you

I love you ❤️
    </div>

    <!-- puzzle card (wrapped exactly around your working puzzle) -->
    <div id="puzzle-card" style="display:none;">
      <div id="puzzle-box" >
        <div id="puzzle-controls" style="display:block;">
          <button onclick="startPuzzle(2)">2×2</button>
          <button onclick="startPuzzle(3)">3×3</button>
          <button onclick="startPuzzle(4)">4×4</button>
        </div>

        <!-- THIS is your original working puzzle container (300×300) -->
        <div id="puzzle-container"></div>

        <div id="puzzle-message"></div>
        <button id="puzzle-back" onclick="closePuzzle()">Back</button>
      </div>
    </div>
  </div>

  <!-- right-side photos -->
  <div id="photos">
    <img src="photo.jpg" alt="photo1" />
    <img src="photo2.jpg" alt="photo2" />
  </div>
</div>

<script>
/* ----------------- Login / Logout ----------------- */
const loginBtn = document.getElementById('login-btn');
const loginForm = document.getElementById('login-form');
const main = document.getElementById('main');
loginBtn.addEventListener('click', ()=> {
  const name = document.getElementById('name').value.trim();
  if(!name) { alert('Please enter a name to continue'); return; }
  loginForm.style.display='none';
  main.style.display='block';
});
document.getElementById('logout').addEventListener('click', ()=> location.reload());

/* ----------------- Tabs ----------------- */
const showMessageBtn = document.getElementById('show-message');
const showPuzzleTabBtn = document.getElementById('show-puzzle-tab');
const messageCard = document.getElementById('message-card');
const puzzleCard = document.getElementById('puzzle-card');

showMessageBtn.addEventListener('click', ()=>{
  // toggle message card
  messageCard.style.display = (messageCard.style.display === 'block') ? 'none' : 'block';
  // hide puzzle card when message opens
  if(messageCard.style.display === 'block') puzzleCard.style.display = 'none';
});

showPuzzleTabBtn.addEventListener('click', ()=>{
  puzzleCard.style.display = (puzzleCard.style.display === 'block') ? 'none' : 'block';
  if(puzzleCard.style.display === 'block') messageCard.style.display = 'none';
});

/* ----------------- Floating hearts (unchanged) ----------------- */
const heartWords = ["Zodwa","I","am","sorry","I love you"];
heartWords.forEach(word=>{
  const h = document.createElement('div');
  h.className = 'heart';
  const sp = document.createElement('span');
  sp.innerText = word;
  h.appendChild(sp);
  h.style.left = (Math.random() * (window.innerWidth - 120)) + 'px';
  h.style.top  = (Math.random() * (window.innerHeight - 120)) + 'px';
  h.style.animationDuration = (4 + Math.random()*3) + 's';
  document.body.appendChild(h);
});

/* ----------------- PUZZLE (exact working code you provided) ----------------- */
/* Images and messages (keep your file names) */
const puzzleImages = ["Puzzel1.JPG","Puzzel2.JPG","Puzzel3.jpeg"];
const messages = [
  "You are the best girlfriend!",
  "You make me so happy and I love you so much!",
  "I am sorry"
];

let gridSize, tiles = [], emptyPos = {}, imgSize = 300;

/* Start puzzle: this is your same working logic (tiles are <img> with object-fit none & objectPosition) */
function startPuzzle(size){
  gridSize = size;
  const container = document.getElementById('puzzle-container');
  container.innerHTML = '';
  tiles = [];
  document.getElementById('puzzle-message').style.display = 'none';
  document.getElementById('puzzle-back').style.display = 'inline-block';
  document.getElementById('puzzle-box').style.display = 'block';

  const imgSrc = puzzleImages[size - 2];
  const tileSize = imgSize / size;

  for(let r=0; r < size; r++){
    for(let c=0; c < size; c++){
      if(r === size-1 && c === size-1){
        emptyPos = { row: r, col: c };
        continue;
      }

      const tile = document.createElement('img');
      tile.src = imgSrc;
      tile.className = 'tile';

      tile.dataset.row = r;
      tile.dataset.col = c;
      tile.dataset.rowOrig = r;
      tile.dataset.colOrig = c;

      tile.style.width = tileSize + 'px';
      tile.style.height = tileSize + 'px';
      tile.style.top = (r * tileSize) + 'px';
      tile.style.left = (c * tileSize) + 'px';

      tile.style.objectFit = 'none';
      tile.style.objectPosition = `-${c * tileSize}px -${r * tileSize}px`;

      tile.addEventListener('click', ()=> moveTile(tile));
      container.appendChild(tile);
      tiles.push(tile);
    }
  }

  shuffleTiles();
}

/* Shuffle using valid moves so puzzle remains solvable */
function shuffleTiles(){
  for(let i=0;i<200;i++){
    const possible = tiles.filter(t => isNeighbor(t, emptyPos));
    const tile = possible[Math.floor(Math.random() * possible.length)];
    swapTile(tile);
  }
}

/* check adjacency */
function isNeighbor(tile, pos){
  const r = parseInt(tile.dataset.row), c = parseInt(tile.dataset.col);
  return (r === pos.row && Math.abs(c - pos.col) === 1) || (c === pos.col && Math.abs(r - pos.row) === 1);
}

/* move tile if neighbor */
function moveTile(tile){
  if(isNeighbor(tile, emptyPos)){
    swapTile(tile);
    checkSolved();
  }
}

/* swap tile with empty */
function swapTile(tile){
  const tileSize = imgSize / gridSize;
  const oldRow = parseInt(tile.dataset.row);
  const oldCol = parseInt(tile.dataset.col);

  tile.dataset.row = emptyPos.row;
  tile.dataset.col = emptyPos.col;

  tile.style.top = (emptyPos.row * tileSize) + 'px';
  tile.style.left = (emptyPos.col * tileSize) + 'px';

  emptyPos.row = oldRow;
  emptyPos.col = oldCol;
}

/* check solved and reveal message under puzzle */
function checkSolved(){
  const solved = tiles.every(tile =>
    parseInt(tile.dataset.row) === parseInt(tile.dataset.rowOrig) &&
    parseInt(tile.dataset.col) === parseInt(tile.dataset.colOrig)
  );
  if(solved){
    const msgBox = document.getElementById('puzzle-message');
    msgBox.innerText = messages[gridSize - 2];
    msgBox.style.display = 'block';
  }
}

/* close puzzle */
function closePuzzle(){
  document.getElementById('puzzle-container').innerHTML = '';
  document.getElementById('puzzle-message').style.display = 'none';
  document.getElementById('puzzle-back').style.display = 'none';
  document.getElementById('puzzle-box').style.display = 'none';
  // keep puzzle-card visible for user to reopen controls if desired
  // If you want to hide entire puzzle-card too, uncomment next line:
  // document.getElementById('puzzle-card').style.display = 'none';
}
</script>
</body>
</html>
