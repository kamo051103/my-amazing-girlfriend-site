<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apology Website</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Arial', sans-serif; background:#ffe6ec; overflow:hidden; }

/* LOGIN PAGE */
#login-form {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    background:url('photo3.jpeg') center/cover no-repeat;
}
#login-form h1 { font-size:32px; margin-bottom:20px; color:white; text-shadow:0 0 10px black; }
#login-form input { padding:10px; border-radius:6px; border:none; margin:5px 0; width:220px; font-size:16px; }
#login-btn { background:#ff4d6d; color:white; cursor:pointer; }

/* MAIN PAGE */
#main { display:none; height:100vh; background:#ffe6ec; position:relative; padding:20px; }

/* Logout bottom-left */
#logout { position:absolute; bottom:20px; left:20px; padding:8px 16px; background:#ff4d6d; color:white; border:none; border-radius:8px; cursor:pointer; z-index:1000; }

/* Photos on right */
#photos { position:absolute; right:40px; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; z-index:1; }
#photos img { width:300px; border-radius:15px; margin-bottom:20px; box-shadow:0 4px 12px rgba(0,0,0,0.2); }

/* Tabs Left */
.tabs { position:absolute; left:40px; top:50%; transform:translateY(-50%); z-index:100; }
.tab-btn { padding:12px 20px; margin-bottom:10px; border:none; border-radius:8px; background:#ff4d6d; color:white; cursor:pointer; font-size:17px; width:220px; }

/* MESSAGE & PUZZLE CONTENT */
#message-content, #puzzle-content { display:none; margin-top:15px; background:white; padding:20px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.15); max-width:400px; max-height:450px; overflow:auto; white-space:pre-line; line-height:1.6; position:relative; }

/* PUZZLE OPTIONS */
#puzzle-options { margin-bottom:10px; }
#puzzle-options button { margin-right:5px; padding:6px 12px; border:none; border-radius:6px; background:#ff4d6d; color:white; cursor:pointer; }

/* HEARTS */
.heart { position:absolute; width:90px; height:90px; background:red; transform:rotate(-45deg); z-index:50; }
.heart:before, .heart:after { content:""; position:absolute; width:90px; height:90px; background:red; border-radius:50%; }
.heart:before { top:-45px; left:0; }
.heart:after { left:45px; top:0; }
.heart span { position:absolute; top:55%; left:50%; transform:translate(-50%,-50%) rotate(45deg); color:white; font-weight:bold; font-size:15px; width:80px; text-align:center; z-index:999; text-shadow:0 0 6px black; pointer-events:none; }

/* FLOAT ANIMATION */
@keyframes float { 0% { transform:translate(0,0) rotate(-45deg); } 50% { transform:translate(0,-200px) rotate(-45deg); } 100% { transform:translate(0,0) rotate(-45deg); } }

/* PUZZLE TILES */
.puzzle-tile { position:absolute; background-size:cover; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.3); border:1px solid #fff; transition:top 0.2s, left 0.2s; }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-form">
    <h1>Login</h1>
    <input type="text" id="name" placeholder="Enter your name">
    <input type="submit" value="Login" id="login-btn">
</div>

<!-- MAIN PAGE -->
<div id="main">
    <button id="logout">Logout</button>

    <div class="tabs">
        <button class="tab-btn" id="show-message">Apology Message</button>
        <button class="tab-btn" id="show-puzzle">Puzzle</button>
        <div id="message-content"></div>
        <div id="puzzle-content">
            <div id="puzzle-options">
                <button onclick="startPuzzle(2)">2x2</button>
                <button onclick="startPuzzle(3)">3x3</button>
                <button onclick="startPuzzle(4)">4x4</button>
            </div>
        </div>
    </div>

    <div id="photos">
        <img src="photo.jpg">
        <img src="photo2.jpg">
    </div>
</div>

<script>
const loginBtn=document.getElementById("login-btn");
const nameInput=document.getElementById("name");
const loginForm=document.getElementById("login-form");
const main=document.getElementById("main");
const messageBox=document.getElementById("message-content");
const puzzleBox=document.getElementById("puzzle-content");

// APOLOGY MESSAGE
const APOLOGY=`I’m really sorry for what I’ve done I hurt you and there’s no excuse for it you’ve always shown me love loyalty and patience and I broke the trust again in which we just reestablished and rebuilt and that you gave me I want you to know that my actions are a reflection of my flaws I should’ve handled the situation differently I handled everything terribly you are an incredible strong caring intelligent I should have been as amazing as you have been to me and I’m sorry for failing you I just want you to know that I truly value you and I’m committed to understanding you better you deserve the world I’m sorry for hurting you you mean a lot to me and I hope that I can show you that I only handled the situation wrong not that I don’t love you\n\nI love you ❤️`;

// LOGIN
loginBtn.addEventListener("click", ()=>{
    if(nameInput.value.trim()!==""){
        loginForm.style.display="none";
        main.style.display="block";
    }
});

// LOGOUT
document.getElementById("logout").onclick=()=>location.reload();

// MESSAGE TAB
document.getElementById("show-message").addEventListener("click",()=>{
    if(messageBox.style.display==="block"){ messageBox.style.display="none"; }
    else{ messageBox.style.display="block"; puzzleBox.style.display="none"; messageBox.innerText=APOLOGY; }
});

// PUZZLE TAB
document.getElementById("show-puzzle").addEventListener("click",()=>{
    if(puzzleBox.style.display==="block"){ puzzleBox.style.display="none"; }
    else{ puzzleBox.style.display="block"; messageBox.style.display="none"; }
});

// HEARTS
const heartWords=["Zodwa","I","am","sorry","I love you"];
heartWords.forEach(word=>{
    const h=document.createElement("div");
    h.className="heart";
    const t=document.createElement("span");
    t.innerText=word;
    h.appendChild(t);
    h.style.left=Math.random()*(window.innerWidth-100)+"px";
    h.style.top=Math.random()*(window.innerHeight-100)+"px";
    h.style.animationDuration=(4+Math.random()*3)+"s";
    main.appendChild(h);
});

// PUZZLE
const puzzleImages=["Puzzel1.JPG","Puzzel2.JPG","Puzzel3.jpeg"];
let tiles=[], emptyPos={}, puzzleSize=2, puzzleMessage="";

function startPuzzle(size){
    puzzleSize=size;
    tiles=[];
    puzzleBox.innerHTML=`<div id="puzzle-options">
        <button onclick="startPuzzle(2)">2x2</button>
        <button onclick="startPuzzle(3)">3x3</button>
        <button onclick="startPuzzle(4)">4x4</button>
        <button onclick="closePuzzle()">Back</button>
    </div>`;

    const puzzleArea=document.createElement("div");
    puzzleArea.style.position="relative";
    puzzleArea.style.width="350px";
    puzzleArea.style.height="350px";
    puzzleArea.style.margin="10px auto";
    puzzleBox.appendChild(puzzleArea);

    const imgSrc=puzzleImages[size-2];
    const tileSize=350/size;

    // Create tile positions
    let positions=[];
    for(let r=0;r<size;r++){
        for(let c=0;c<size;c++){
            if(r===size-1 && c===size-1){
                emptyPos={r,c};
                continue;
            }
            positions.push({r,c});
        }
    }

    // Shuffle positions
    positions.sort(()=>Math.random()-0.5);

    // Assign messages for each image
    const messages=["You are the best girlfriend","You make me so happy and I love you so much","I am sorry"];
    puzzleMessage=messages[size-2];

    // Create tiles
    for(let i=0;i<positions.length;i++){
        const pos=positions[i];
        const r=pos.r, c=pos.c;
        const tile=document.createElement("div");
        tile.className="puzzle-tile";
        tile.style.width=tileSize+"px";
        tile.style.height=tileSize+"px";
        tile.style.top=(r*tileSize)+"px";
        tile.style.left=(c*tileSize)+"px";
        tile.style.backgroundImage=`url(${imgSrc})`;
        tile.style.backgroundSize=`${tileSize*size}px ${tileSize*size}px`;
        tile.style.backgroundPosition=`-${c*tileSize}px -${r*tileSize}px`;
        tile.dataset.r=r;
        tile.dataset.c=c;
        tile.dataset.correctR=pos.r;
        tile.dataset.correctC=pos.c;
        tile.addEventListener("click",()=>moveTile(tile,puzzleArea,tileSize));
        puzzleArea.appendChild(tile);
        tiles.push(tile);
    }
}

// Move tile function
function moveTile(tile, container, size){
    const r=parseInt(tile.dataset.r);
    const c=parseInt(tile.dataset.c);
    const dr=Math.abs(r-emptyPos.r);
    const dc=Math.abs(c-emptyPos.c);
    if((dr===1 && dc===0) || (dr===0 && dc===1)){
        tile.style.top=emptyPos.r*size+"px";
        tile.style.left=emptyPos.c*size+"px";
        const tempR=tile.dataset.r;
        const tempC=tile.dataset.c;
        tile.dataset.r=emptyPos.r;
        tile.dataset.c=emptyPos.c;
        emptyPos={r:parseInt(tempR), c:parseInt(tempC)};
        checkPuzzleSolved();
    }
}

// Check if puzzle is solved
function checkPuzzleSolved(){
    const solved=tiles.every(t=>t.dataset.r==t.dataset.correctR && t.dataset.c==t.dataset.correctC);
    if(solved){
        alert("Puzzle solved! Message: "+puzzleMessage);
    }
}

// Close puzzle
function closePuzzle(){ puzzleBox.style.display="none"; }
</script>
</body>
</html>
